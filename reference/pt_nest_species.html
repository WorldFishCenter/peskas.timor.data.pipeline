<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Nest species columns — pt_nest_species • peskas.timor.data.pipeline</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Nest species columns — pt_nest_species" />
<meta property="og:description" content="Nests species columns obtained when reading structured data from the kobo
landings survey" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">peskas.timor.data.pipeline</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.8.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Nest species columns</h1>
    
    <div class="hidden name"><code>pt_nest_species.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Nests species columns obtained when reading structured data from the kobo
landings survey</p>
    </div>

    <pre class="usage"><span class='fu'>pt_nest_species</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>A data frame containing raw landings data from the Timor operations.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Landings data in which the information about multiple species has
been nested into a single column (<code>species_group</code>) this column contains a
tibble for every row. This, species tibble has as many rows as there are
species. In turn, the data frames contained in <code>species_group</code> contain a
column called <code>length_individuals</code> where a data frame with the number of
individuals per length is stored</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>One of the disadvantages of using structured survey data is that the tables
can become very wide (many columns). This happens when question groups or
other fields can be recorded multiple times. For example in the landings
survey, for each species captured, about 17 questions are recorded. There is
no limit to the number of species that can be recorded in the trip. If, for
example a survey records seven species we will have over a hundred columns in
the data corresponding to species information.</p>
<p>To improve that situation an avoid using multiple tables we use <strong>nested data
frames</strong> (see <a href='https://tidyr.tidyverse.org/reference/nest.html'>tidyr::nest</a>). In nested data frames columns can be lists and
can contain arbitrary information, like other data frames, lists, vectors, or
models.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='va'>dummy_landings</span> <span class='op'>&lt;-</span> <span class='fu'>tidyr</span><span class='fu'>::</span><span class='fu'><a href='https://tibble.tidyverse.org/reference/tibble.html'>tibble</a></span><span class='op'>(</span>
    `_id` <span class='op'>=</span> <span class='st'>"123"</span>,
    `species_group.0.species_group/species` <span class='op'>=</span> <span class='st'>"sp01"</span>,
    `species_group.0.species_group/food_or_sale` <span class='op'>=</span> <span class='st'>"food"</span>,
    `species_group.0.species_group/no_fish_by_length_group/no_individuals_10_15` <span class='op'>=</span> <span class='fl'>10</span>,
    `species_group.0.species_group/no_fish_by_length_group/no_individuals_5_10` <span class='op'>=</span> <span class='fl'>10</span>,
    `species_group.0.species_group/no_fish_by_length_group/fish_length_over60` <span class='op'>=</span> <span class='fl'>80</span>,
    `species_group.0.species_group/no_fish_by_length_group/no_individuals_over60` <span class='op'>=</span> <span class='fl'>1</span>,
    `species_group.1.species_group/species` <span class='op'>=</span> <span class='st'>"sp02"</span>,
    `species_group.1.species_group/food_or_sale` <span class='op'>=</span> <span class='st'>"sale"</span>,
    `species_group.1.species_group/no_fish_by_length_group/no_individuals_20_25` <span class='op'>=</span> <span class='fl'>5</span>,
    `species_group.1.species_group/no_fish_by_length_group/no_individuals_5_10` <span class='op'>=</span> <span class='fl'>20</span>,
    `species_group.1.species_group/no_fish_by_length_group/fish_length_over60` <span class='op'>=</span> <span class='fl'>70</span>,
    `species_group.1.species_group/no_fish_by_length_group/no_individuals_over60` <span class='op'>=</span> <span class='fl'>2</span><span class='op'>)</span>
<span class='fu'>pt_nest_species</span><span class='op'>(</span><span class='va'>dummy_landings</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span style='color: #949494;'># A tibble: 1 x 2</span><span>
#&gt;   `_id` species_group   
#&gt;   </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;list&gt;</span><span>          
#&gt; </span><span style='color: #BCBCBC;'>1</span><span> 123   </span><span style='color: #949494;'>&lt;tibble [2 × 4]&gt;</span><span></div></span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Fernando Cagua, Lorenzo Longobardi.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


