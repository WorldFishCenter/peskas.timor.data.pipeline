<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Nest attachment columns — pt_nest_attachments • peskas.timor.data.pipeline</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/IBM_Plex_Sans-0.4.9/font.css" rel="stylesheet"><link href="../deps/Fira_Mono-0.4.9/font.css" rel="stylesheet"><link href="../deps/Alegreya_Sans_SC-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Nest attachment columns — pt_nest_attachments"><meta name="description" content="Nests attachment columns obtained when reading structured data from the kobo
landings survey"><meta property="og:description" content="Nests attachment columns obtained when reading structured data from the kobo
landings survey"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">peskas.timor.data.pipeline</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">3.3.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Nest attachment columns</h1>

      <div class="d-none name"><code>pt_nest_attachments.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Nests attachment columns obtained when reading structured data from the kobo
landings survey</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">pt_nest_attachments</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>A data frame containing raw landings data from the Timor operations.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Landings data in which the information about multiple attachments has
been nested into a single column (<code>_attachments</code>) this column contains a
tibble for every row. This, attachment tibble has as many rows as there are
attachments.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>One of the disadvantages of using structured survey data is that the tables
can become very wide (many columns). This happens when question groups or
other fields can be recorded multiple times. For example in the landings
survey, for each species captured, about 17 questions are recorded. There is
no limit to the number of species that can be recorded in the trip. If, for
example a survey records seven species we will have over a hundred columns in
the data corresponding to species information.</p>
<p>To improve that situation an avoid using multiple tables we use <strong>nested data
frames</strong> (see <a href="https://tidyr.tidyverse.org/reference/nest.html" class="external-link">tidyr::nest</a>). In nested data frames columns can be lists and
can contain arbitrary information, like other data frames, lists, vectors, or
models.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">dummy_landings</span> <span class="op">&lt;-</span> <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  `_id` <span class="op">=</span> <span class="st">"123"</span>,</span></span>
<span class="r-in"><span>  `_attachments.0.download_url` <span class="op">=</span> <span class="st">"http://url-1.com"</span>,</span></span>
<span class="r-in"><span>  `_attachments.0.id` <span class="op">=</span> <span class="st">"01"</span>,</span></span>
<span class="r-in"><span>  `_attachments.1.download_url` <span class="op">=</span> <span class="st">"http://url-2.com"</span>,</span></span>
<span class="r-in"><span>  `_attachments.1.id` <span class="op">=</span> <span class="st">"02"</span>,</span></span>
<span class="r-in"><span>  `_attachments.2.download_url` <span class="op">=</span> <span class="cn">NA</span>,</span></span>
<span class="r-in"><span>  `_attachments.2.id` <span class="op">=</span> <span class="cn">NA</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">pt_nest_attachments</span><span class="op">(</span><span class="va">dummy_landings</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 1 × 2</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   `_id` `_attachments`  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> 123   <span style="color: #949494;">&lt;tibble [2 × 2]&gt;</span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Lorenzo Longobardi, Fernando Cagua, Hamza Altarturi.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

