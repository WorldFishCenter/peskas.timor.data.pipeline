% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/export.R
\name{format_aggregated_data}
\alias{format_aggregated_data}
\title{Format aggregated time-binned datasets for portal output}
\usage{
format_aggregated_data(aggregated, municipal = FALSE, national_boats = NULL)
}
\arguments{
\item{aggregated}{A data frame (municipal mode) or a list of data frames
(national mode) containing a \code{date_bin_start} column.}

\item{municipal}{Logical. If \code{TRUE}, treat \code{aggregated} as a single municipal
table; otherwise treat it as a list of time-binned tables.}

\item{national_boats}{Numeric/integer. Total number of boats to assign to the
\code{n_boats} column in national mode.}
}
\value{
The formatted \code{aggregated} object: a \code{data.table} (municipal mode) or
a list of \code{data.table}s (national mode) with added/updated label columns.
}
\description{
Adds human-readable date labels (day/week/month/year) to aggregated datasets.
Supports two modes:
\itemize{
\item Municipal mode (\code{municipal = TRUE}): expects a single data frame with
\code{date_bin_start} and adds \code{month} and \code{year} columns.
\item National mode (\code{municipal = FALSE}): expects a list of data frames
(e.g., \code{day}, \code{week}, \code{month}, \code{year}), converts each to \code{data.table},
sets \code{n_boats} to \code{national_boats}, and adds formatted date label columns.
}
}
\details{
In national mode, formatted labels are:
\itemize{
\item \code{day}: \code{"\%d \%b \%y"}
\item \code{week}: \code{"\%d \%b \%y"}
\item \code{month}: \code{"\%B \%Y"} plus \code{year} as \code{"\%Y"}
\item \code{year}: \code{"\%Y"}
}
}
\examples{
\dontrun{
agg <- get_file("timor_aggregated")
agg2 <- format_aggregated_data(agg, national_boats = 123)

m <- get_file("timor_municipal_aggregated")
m2 <- format_aggregated_data(m, municipal = TRUE)
}
}
\seealso{
data.table::as.data.table
}
\keyword{internal}
