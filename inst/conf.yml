default:

  surveys:
    landings:
      api: kobohr
      survey_id: 344563
      token: !expr Sys.getenv('KOBO_TOKEN')
      file_prefix: timor-landings-v2
      version:
        preprocess: latest
    landings_legacy:
      api: kobohr
      survey_id: 135272
      token: !expr Sys.getenv('KOBO_TOKEN')
      file_prefix: timor-landings-v1
      version:
        preprocess: latest
    merged_landings:
      file_prefix: timor-landings-merged
      version: latest
    validated_landings:
      file_prefix: timor-landings-merged_validated
      version: latest

  pds:
    trips:
      token: !expr Sys.getenv('PDS_TOKEN')
      secret: !expr Sys.getenv('PDS_SECRET')
      file_prefix: pds-trips
      version:
        preprocess: latest
    tracks:
      token: !expr Sys.getenv('PDS_TOKEN')
      secret: !expr Sys.getenv('PDS_SECRET')
      file_prefix: pds-track
      version:
        preprocess: latest
      compress: true
      multisession:
        parallel: true
        n_sessions: 32

  metadata:
    airtable:
      name: metadata-tables
      base_id: appjEVaN8kBNXAWak
      api_key: !expr Sys.getenv("AIRTABLE_KEY")
      tables:
        - boats
        - devices
        - vms_installs
        - catch_types
        - fao_catch
        - morphometric_table
        - centro_pescas
        - vessel_types
        - gear_types
        - stations
        - reporting_units
    version:
      preprocess: latest
    rfishtable:
      file_prefix: rfish-table
      version: latest
      country_codes:
        - 626
        - 360

  validation:
    landings:
      default:
        method: MAD
        k: 3
        max: 20
        min: 0
      survey_time:
        max_duration: 20
        submission_delay: 28
      catch:
        n_individuals:
          k: 7
      cook_dist: 21
    pds_trips:
      max_trip_hours: 18
      min_trip_hours: 0.5
      trip_km: 60
      start_end_km: 3
      outliers : 10
      timetrace: 1400
      consecutive_time: 3
      consecutive_distance: 2
    airtable:
      name: validation-tables
      base_id: appWcjh7unNJudLYk
      api_key: !expr Sys.getenv("AIRTABLE_KEY")
      tables:
        - flags_dev
        - alerts
      flags_table: flags_dev
    version:
      preprocess: latest

  merged_trips:
    file_prefix: all_trips

  models:
    file_prefix: model_predictions
    modelled_taxa: [CLP, CJX, SDX, BEN, TUN, EMP, FLY, SNA, RAX, CGX, MOO]

  export:
    file_prefix: timor

  export_dataverse:
    server: 'demo.dataverse.org'
    dataverse_id: 'peskas'
    token: !expr Sys.getenv('DATAVERSE_TOKEN')

    metadata:
       title: 'Peskas - National Fisheries Monitoring System of Timor-Leste'
       subject: 'Fish, Fisheries, Monitoring, Management, Production, Digital, Pipeline, Automated analytics'
       language: 'English'
       description: 'A digital fisheries monitoring pipeline comprised of free, open-source software components and example summary data from field trials in Timor-Leste'
       creator: 'Tilley Alex'

  storage:
    google:
      key: gcs
      options:
        project: peskas
        bucket: timor-dev
        service_account_key: !expr Sys.getenv('GCP_SA_KEY')

  pds_storage:
    google:
      key: gcs
      options:
        project: peskas
        bucket: pds-timor-dev
        service_account_key: !expr Sys.getenv('GCP_SA_KEY')

  public_storage:
    google:
      key: gcs
      options:
        project: peskas
        bucket: public-timor-dev
        service_account_key: !expr Sys.getenv('GCP_SA_KEY')

production:
  storage:
    google:
      options:
        bucket: timor
  pds_storage:
    google:
      options:
        bucket: pds-timor
  public_storage:
    google:
      options:
        bucket: public-timor
  validation:
    airtable:
      tables:
        - flags
        - alerts
      flags_table: flags

local:
  inherits: development
  surveys:
    landings:
      token: !expr readLines("auth/kobo-token")
    landings_legacy:
      token: !expr readLines("auth/kobo-token")
  metadata:
    airtable:
      api_key: !expr readLines("auth/airtable-key")
  validation:
    airtable:
      api_key: !expr readLines("auth/airtable-key")
  pds:
    trips:
      token: !expr readLines("auth/pds-token")
      secret: !expr readLines("auth/pds-secret")
    tracks:
      token: !expr readLines("auth/pds-token")
      secret: !expr readLines("auth/pds-secret")
  export_dataverse:
    token: !expr readLines("auth/dataverse-token")
  storage:
    google:
      options:
        service_account_key: !expr readLines("auth/gcp-sa-peskas_ingestion-key.json")
  pds_storage:
    google:
      options:
        service_account_key: !expr readLines("auth/gcp-sa-peskas_ingestion-key.json")
  public_storage:
    google:
      options:
        service_account_key: !expr readLines("auth/gcp-sa-peskas_ingestion-key.json")


